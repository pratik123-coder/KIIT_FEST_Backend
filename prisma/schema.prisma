generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int       @id @default(autoincrement())
  name          String
  email         String    @unique
  password      String
  phoneNumber   String
  DateOfBirth   DateTime
  city          String
  state         String
  gender        String
  college       String
  events        Event[]   @relation("participants")
  accomodation  Boolean
  total_events  Event[]   @relation("total_event", references: [event_id])
  payment       Int
  createdAt     DateTime  @default(now())
  passwordEntry Password  @relation("user_password", fields: [password])
  issues        Issue[]   @relation("user_issue", fields: [userId])
}

model Event {
  event_id      String  @id @default(auto())
  name          String  @unique
  participants  User[]  @relation("participants", references: [id])
  total_event   User[]  @relation("total_event", references: [id])
}

model Accomodation {
  id       Int     @id @default(autoincrement())
  user_id  User[]  @relation("accomodation", references: [id])
  location String
}

model Password {
  id           Int       @id @default(autoincrement())
  user_id      User[]    @relation("user_password", references: [id])
  oldpassword  String
  newpassword  String
  updatedAt    DateTime  @default(now())
}

model Issue {
  id         Int       @id @default(autoincrement())
  userId     User[]    @relation("user_issue", references: [id])
  issue      String
  createdAt  DateTime  @default(now())
  resolved   Boolean
}
